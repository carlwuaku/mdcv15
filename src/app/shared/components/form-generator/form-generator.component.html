<button *ngIf="enableShowHideButton" class="btn btn-sm btn-primary" (click)="showOrHide()">{{show ? 'Hide' : 'Show'}}
  {{showHideButtonTitle}}</button>
<form *ngIf="show" ngNativeValidate (submit)="formType === 'submit' ? submit() : generateFilterUrl()"
  class="flex-col gap4">
  <div class=" ">
    <div class="row">
      <ng-container *ngFor="let field of fields; let i = index">
        <div class="col-md-{{12 / numOfRows}} formField">

          <label>{{field.label}} <span *ngIf="field.required">*</span></label>
          <div class="text-muted">{{field.hint}}</div>
          <div *ngIf="field.showOnly === true; else showInput">
            {{field.value}}</div>
          <ng-template #showInput>
            <ng-container [ngSwitch]="field.type">
              <div *ngSwitchCase="'radio'">
                <span *ngFor="let option of field.options">
                  <input type="radio" [value]="option.value" [(ngModel)]="field.value" name="{{field.label}}" />
                  {{option.key}}</span>
              </div>

              <select  class="form-control"
                [required]="field.required" *ngSwitchCase="'select'" [(ngModel)]="field.value" name="{{field.label}}">
                <option value="">None</option>
                <option *ngFor="let option of field.options" [value]="option.value">{{option.key}}</option>
              </select>

              <textarea   class="form-control"
                [required]="field.required" *ngSwitchCase="'textarea'" [(ngModel)]="field.value"
                name="{{field.label}}"></textarea>

              <app-file-uploader [existingImage]="field.value" (onUploadCompleted)="setFieldValue($event, field)"
                *ngSwitchCase="'picture'"></app-file-uploader>

              <app-select-object *ngSwitchCase="'api'" [url]="field.api_url!"
                [labelProperty]="field.apiLabelProperty || '' " [keyProperty]="field.apiKeyProperty || ''"
                [type]="field.apiType!" [initialValue]="field.value" (selectionChanged)="setFieldValue($event, field)">
              </app-select-object>
              <span *ngSwitchDefault>
                <input class="form-control"
                  [attr.list]="formId+field.name+'_datalist'" [required]="field.required" type="{{field.type}}"
                  [(ngModel)]="field.value" name="{{field.label}}" />
                <datalist id="{{formId+field.name}}_datalist" *ngIf="field.options.length > 0">
                  <option *ngFor="let option of field.options" [value]="option.value">{{option.key}}</option>
                </datalist>
              </span>

            </ng-container>
          </ng-template>
        </div>
        <!-- Start a new row if index is a multiple of numOfRows or it's the last iteration -->
        <div *ngIf="(i + 1) % numOfRows === 0 || i === fields.length - 1" class="w-100"></div>
      </ng-container>
    </div>
  </div>
  <div>
    <button type="reset" mat-button color="warn">{{resetButtonText}}</button>

    <button type="submit" mat-raised-button color="primary">{{submitButtonText}}</button>

  </div>
</form>
