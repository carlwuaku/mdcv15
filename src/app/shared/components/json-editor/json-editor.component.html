<div class="json-editor">
  <div class="json-editor-header">
    <div class="header-title">
      <mat-icon>code</mat-icon>
      <span>JSON Editor</span>
    </div>
    <div class="header-actions">
      <button
        *ngIf="isArray"
        mat-stroked-button
        color="accent"
        (click)="addObject()"
        matTooltip="Add new object to array">
        <mat-icon>add</mat-icon>
        Add Object
      </button>
      <button
        mat-stroked-button
        color="primary"
        (click)="formatJson()"
        [disabled]="!isValid"
        matTooltip="Format JSON">
        <mat-icon>format_align_left</mat-icon>
        Format
      </button>
      <button
        mat-stroked-button
        color="warn"
        (click)="clearValue()"
        matTooltip="Clear value and emit null">
        <mat-icon>clear</mat-icon>
        Clear
      </button>
    </div>
  </div>

  <div class="json-editor-content">
    <textarea
      class="json-textarea"
      [class.invalid]="!isValid"
      [value]="jsonText"
      (input)="onTextChange($event)"
      placeholder="Enter valid JSON here..."
      rows="15"></textarea>
  </div>

  <div class="json-editor-footer">
    <div class="validation-message" *ngIf="!isValid">
      <mat-icon class="error-icon">error</mat-icon>
      <span class="error-text">{{ errorMessage }}</span>
    </div>
    <div class="validation-errors" *ngIf="validationErrors.length > 0">
      <div class="error-item" *ngFor="let error of validationErrors">
        <mat-icon class="error-icon-small">warning</mat-icon>
        <span class="error-text-small">{{ error }}</span>
      </div>
    </div>
    <div class="validation-message valid" *ngIf="isValid">
      <mat-icon class="success-icon">check_circle</mat-icon>
      <span class="success-text">Valid JSON{{ schema ? ' (Schema validated)' : '' }}</span>
    </div>
  </div>
</div>